"""
–ú–æ–¥—É–ª—å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–≤–µ—Ç–æ–≤ –ò–ò –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —ç–º–æ—Ü–∏–π –∂–∏–≤–æ—Ç–Ω—ã—Ö
–°–æ–≤–º–µ—Å—Ç–∏–º —Å Python 3.13.1
"""
from typing import Dict, List, Any

class AIAdvisor:
    """–ö–ª–∞—Å—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–≤–µ—Ç–æ–≤ –ø–æ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ —ç–º–æ—Ü–∏–π –∂–∏–≤–æ—Ç–Ω—ã—Ö"""
    
    def __init__(self):
        self.advice_templates = self._load_advice_templates()
    
    def _load_advice_templates(self) -> Dict[str, List[str]]:
        """–ó–∞–≥—Ä—É–∂–∞–µ—Ç —à–∞–±–ª–æ–Ω—ã —Å–æ–≤–µ—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–π —ç–º–æ—Ü–∏–∏"""
        return {
            'angry': [
                "üî¥ –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –ø—Ä–æ—è–≤–ª—è–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–∏ –∞–≥—Ä–µ—Å—Å–∏–∏ –∏–ª–∏ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏—è.",
                "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:",
                "‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –∂–∏–≤–æ—Ç–Ω–æ–≥–æ –µ—Å—Ç—å —Ç–∏—Ö–æ–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞",
                "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–µ–∑–∫–∏—Ö –¥–≤–∏–∂–µ–Ω–∏–π –∏ –≥—Ä–æ–º–∫–∏—Ö –∑–≤—É–∫–æ–≤",
                "‚Ä¢ –ü—Ä–µ–¥–ª–æ–∂–∏—Ç–µ –ª—é–±–∏–º—É—é –∏–≥—Ä—É—à–∫—É –∏–ª–∏ –ª–∞–∫–æ–º—Å—Ç–≤–æ",
                "‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –±–æ–ª–∏—Ç –ª–∏ —á—Ç–æ-—Ç–æ —É –ø–∏—Ç–æ–º—Ü–∞ (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –≤–∏–∑–∏—Ç –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É)",
                "‚Ä¢ –û–±–µ—Å–ø–µ—á—å—Ç–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é —Ñ–∏–∑–∏—á–µ—Å–∫—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –¥–ª—è —Å–Ω—è—Ç–∏—è —Å—Ç—Ä–µ—Å—Å–∞",
                "‚Ä¢ –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —É—Å–ø–æ–∫–∞–∏–≤–∞—é—â–∏–µ —Ñ–µ—Ä–æ–º–æ–Ω—ã –∏–ª–∏ –º—è–≥–∫—É—é –º—É–∑—ã–∫—É",
                "‚Ä¢ –ï—Å–ª–∏ –∞–≥—Ä–µ—Å—Å–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è, –ø—Ä–æ–∫–æ–Ω—Å—É–ª—å—Ç–∏—Ä—É–π—Ç–µ—Å—å —Å –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω—á–µ—Å–∫–∏–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º"
            ],
            'sad': [
                "üîµ –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –≤—ã–≥–ª—è–¥–∏—Ç –≥—Ä—É—Å—Ç–Ω—ã–º –∏–ª–∏ –ø–æ–¥–∞–≤–ª–µ–Ω–Ω—ã–º.",
                "üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:",
                "‚Ä¢ –£–¥–µ–ª–∏—Ç–µ –±–æ–ª—å—à–µ –≤—Ä–µ–º–µ–Ω–∏ –∏ –≤–Ω–∏–º–∞–Ω–∏—è –≤–∞—à–µ–º—É –ø–∏—Ç–æ–º—Ü—É",
                "‚Ä¢ –û—Ä–≥–∞–Ω–∏–∑—É–π—Ç–µ —Å–æ–≤–º–µ—Å—Ç–Ω—ã–µ –∏–≥—Ä—ã –∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–Ω—è—Ç–∏—è",
                "‚Ä¢ –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–∏—Ç–æ–º–µ—Ü –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π",
                "‚Ä¢ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ - –≥—Ä—É—Å—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–∏–∑–Ω–∞–∫–æ–º –±–æ–ª–µ–∑–Ω–∏",
                "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º –∫–æ—Ä–º–ª–µ–Ω–∏—è –∏ –ø—Ä–æ–≥—É–ª–æ–∫",
                "‚Ä¢ –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é –∏ –±–µ–∑–æ–ø–∞—Å–Ω—É—é —Å—Ä–µ–¥—É",
                "‚Ä¢ –ï—Å–ª–∏ –≥—Ä—É—Å—Ç—å –¥–ª–∏—Ç—Å—è –±–æ–ª–µ–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –¥–Ω–µ–π, –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É",
                "‚Ä¢ –†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—â–µ–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏ –∂–∏–≤–æ—Ç–Ω—ã–º–∏ (–µ—Å–ª–∏ —ç—Ç–æ —É–º–µ—Å—Ç–Ω–æ)"
            ],
            'happy': [
                "üü¢ –û—Ç–ª–∏—á–Ω–æ! –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –≤—ã–≥–ª—è–¥–∏—Ç —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –∏ –¥–æ–≤–æ–ª—å–Ω—ã–º!",
                "üí° –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Ö–æ—Ä–æ—à–µ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ:",
                "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º –∫–æ—Ä–º–ª–µ–Ω–∏—è –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏",
                "‚Ä¢ –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —É–¥–µ–ª—è—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –∏ –∏–≥—Ä–∞—Ç—å —Å –ø–∏—Ç–æ–º—Ü–µ–º",
                "‚Ä¢ –û–±–µ—Å–ø–µ—á—å—Ç–µ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–∏–µ –≤ –∏–≥—Ä–∞—Ö –∏ –∑–∞–Ω—è—Ç–∏—è—Ö",
                "‚Ä¢ –†–µ–≥—É–ª—è—Ä–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∑–¥–æ—Ä–æ–≤—å–µ –¥–ª—è –ø—Ä–æ—Ñ–∏–ª–∞–∫—Ç–∏–∫–∏"
            ],
            'relaxed': [
                "üü° –í–∞—à –ø–∏—Ç–æ–º–µ—Ü –≤—ã–≥–ª—è–¥–∏—Ç —Å–ø–æ–∫–æ–π–Ω—ã–º –∏ —Ä–∞—Å—Å–ª–∞–±–ª–µ–Ω–Ω—ã–º.",
                "üí° –≠—Ç–æ —Ö–æ—Ä–æ—à–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ! –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –µ–≥–æ:",
                "‚Ä¢ –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å —Å–ø–æ–∫–æ–π–Ω—É—é –∏ –∫–æ–º—Ñ–æ—Ä—Ç–Ω—É—é –æ–±—Å—Ç–∞–Ω–æ–≤–∫—É",
                "‚Ä¢ –û–±–µ—Å–ø–µ—á—å—Ç–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π —Ä–µ–∂–∏–º –¥–Ω—è",
                "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Ä–µ–∑–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–∞—Å–ø–æ—Ä—è–¥–∫–µ",
                "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ –∑–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—É—é –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å"
            ]
        }
    
    def get_advice(self, emotion_idx: int, emotion_name: str, confidence: float) -> Dict[str, Any]:
        """
        –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–æ–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π —ç–º–æ—Ü–∏–∏
        
        Args:
            emotion_idx: –ò–Ω–¥–µ–∫—Å —ç–º–æ—Ü–∏–∏ (0=angry, 1=happy, 2=relaxed, 3=sad)
            emotion_name: –ù–∞–∑–≤–∞–Ω–∏–µ —ç–º–æ—Ü–∏–∏
            confidence: –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–∏
            
        Returns:
            –°–ª–æ–≤–∞—Ä—å —Å —Å–æ–≤–µ—Ç–æ–º –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π
        """
        is_negative = emotion_idx in [0, 3]  # angry –∏–ª–∏ sad
        
        advice_lines = self.advice_templates.get(emotion_name, [])
        
        # –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
        confidence_text = f"–£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å: {confidence:.0%}"
        
        return {
            'emotion_idx': emotion_idx,
            'emotion_name': emotion_name,
            'is_negative': is_negative,
            'advice': advice_lines,
            'confidence': confidence,
            'confidence_text': confidence_text,
            'needs_attention': is_negative
        }
    
    def get_emergency_advice(self) -> List[str]:
        """–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–æ–≤–µ—Ç—ã –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏–π"""
        return [
            "‚ö†Ô∏è –ï—Å–ª–∏ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –≤–∞—à–µ–≥–æ –ø–∏—Ç–æ–º—Ü–∞ —Ä–µ–∑–∫–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å –∏–ª–∏ –≤—ã–∑—ã–≤–∞–µ—Ç –±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ:",
            "‚Ä¢ –ù–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä—É",
            "‚Ä¢ –ò–∑–±–µ–≥–∞–π—Ç–µ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç–∞, –µ—Å–ª–∏ –ø–∏—Ç–æ–º–µ—Ü –∞–≥—Ä–µ—Å—Å–∏–≤–µ–Ω",
            "‚Ä¢ –û–±–µ—Å–ø–µ—á—å—Ç–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —Å–µ–±–µ –∏ –æ–∫—Ä—É–∂–∞—é—â–∏–º",
            "‚Ä¢ –ó–∞–ø–∏—à–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –ø–æ–≤–µ–¥–µ–Ω–∏–∏ –¥–ª—è –≤–µ—Ç–µ—Ä–∏–Ω–∞—Ä–∞"
        ]

